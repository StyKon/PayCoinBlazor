@page "/provider/product/add"
@page "/provider/product/edit/{Id}"
<div class="card card-box">
    <div class="card-head">
        <header>Product Form</header>
    </div>
    <div class="card-body" id="bar-parent2">
        <EditForm Model="@product" class="form-horizontal" OnValidSubmit="@HandleValidRequest" OnInvalidSubmit="HandleInvalidRequest">
            <div class="form-body">
                <div class="form-group">
                    <label for="simpleFormEmail">Title</label>
                    <InputText class="form-control" placeholder="Enter Title" @bind-Value="@product.Title" id="Title"></InputText>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Summary</label>
                    <InputTextArea class="form-control" placeholder="Enter Summary" @bind-Value="@product.Summary" id="Summary"></InputTextArea>

                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Description</label>
                    <InputTextArea class="form-control" placeholder="Enter Description" @bind-Value="@product.Description" id="Description"></InputTextArea>

                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Price</label>
                    <InputNumber class="form-control" placeholder="Enter Price" @bind-Value="@product.Price" id="Price"></InputNumber>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Discount</label>
                    <InputNumber class="form-control" placeholder="Enter Stock" @bind-Value="@product.Stock" id="Stock"></InputNumber>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Stock</label>
                    <InputNumber class="form-control" placeholder="Enter Discount" @bind-Value="@product.Discount" id="Discount"></InputNumber>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Photo</label>
                    <InputText class="form-control" placeholder="Enter Photo" @bind-Value="@product.Photo" id="Photo"></InputText>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Category</label>
                    <select class="form-control" placeholder="Enter Category" @bind="product.CategoryId" @oninput="ValueChanged" id="CategoryId">
                        <option value="0">Chose One Category</option>

                        @foreach (var category in categorys)
                        {

                            @if (product.CategoryId == category.CategoryId)
                            {
                                <option value="@category.CategoryId" selected>@category.Title</option>
 }
                            else
                            {
                                <option value="@category.CategoryId">@category.Title</option>
}}
                    </select>
                </div>



                @if (product.CategoryId != 0)
                {

                    <div class="form-group">
                        <label for="simpleFormEmail">Category</label>
                        <select class="form-control" placeholder="Enter ChildCategory" @bind="product.ChildCategoryId" @oninput="ValueChanged" id="ChildCategoryId">
                            @if (product.CategoryId == 0)
                            {


                                <option value="0" selected>Chose One ChildCategory</option>
                            }
                            else
                            {

                                <option value="0">Chose One ChildCategory</option>
                            }
                            @foreach (var childcategory in childcategorys)
                            {
                                @if (product.CategoryId == childcategory.CategoryId)
                                {

                                    @if (product.ChildCategoryId == childcategory.ChildCategoryId)
                                    {
                                        <option value="@childcategory.ChildCategoryId" selected>@childcategory.Title</option>
                                    }
                                    else
                                    {
                                        <option value="@childcategory.ChildCategoryId">@childcategory.Title</option>
                                    }
                                }}
                        </select>
                    </div>}



                @if (product.ChildCategoryId != 0)
                {
                    <div class="form-group">
                        <label for="simpleFormEmail">SmallCategory</label>
                        <select class="form-control" placeholder="Enter SmallCategory" @bind="@product.SmallCategoryId" id="SmallCategoryId">
                            @if (product.ChildCategoryId == 0)
                            {


                                <option value="0" selected>Chose One SmallCategory</option>
                            }
                            else
                            {
                                <option value="0">Chose One SmallCategory</option>
                            }
                            @foreach (var smallcategory in smallcategorys)
                            {
                                @if (product.ChildCategoryId == smallcategory.ChildCategoryId)
                                {
                                    @if (product.SmallCategoryId == smallcategory.SmallCategoryId)
                                    {
                                        <option value="@smallcategory.SmallCategoryId" selected>@smallcategory.Title</option>
                                    }
                                    else
                                    {
                                        <option value="@smallcategory.SmallCategoryId">@smallcategory.Title</option>
                                    }}}
                        </select>
                    </div>}


                <div class="form-group">
                    <label for="simpleFormEmail">Provider</label>
                    <select class="form-control" placeholder="Enter Provider" @bind="@product.ProviderId" id="ProviderId">
                        <option value="">Chose One Provider</option>

                        @foreach (var provider in providers)
                        {
                            @if (provider.ProviderId == product.ProviderId)
                            {
                                <option value="@provider.ProviderId" selected>@provider.CompanyName</option>
 }
                            else
                            {
                                <option value="@provider.ProviderId">@provider.CompanyName</option>
                            }
                        }
                    </select>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Size</label>
                    <InputSelect class="form-control" placeholder="Enter Size" @bind-Value="@product.Size" id="Size" multiple>
                        <option value="">Chose Size</option>
                        <option value="S">Small (S)</option>
                        <option value="M">Medium (M)</option>
                        <option value="L">Large (L)</option>
                        <option value="XL">Extra Large (XL)</option>>
                    </InputSelect>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Condiction</label>
                    <InputSelect class="form-control" placeholder="Enter Condiction" @bind-Value="@product.Condiction" id="Condiction">
                        <option value="">Chose Condiction</option>
                        <option value="default">Default</option>
                        <option value="new">New</option>
                        <option value="hot">Hot</option>
                        <option value="rec">Recommended</option>
                    </InputSelect>
                </div>
                <div class="form-group">
                    <label for="simpleFormEmail">Status</label>
                    <InputSelect class="form-control" placeholder="Enter Status" @bind-Value="@product.Status" id="Status">
                        <option value="">Chose Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">InActive</option>
                    </InputSelect>
                </div>
                <div class="form-group">
                    <div class="offset-md-5">
                        <button type="submit" class="btn btn-info">Save</button>
                        <button type="button" @onclick="@goToOverview" class="btn btn-default">Back</button>
                    </div>
                </div>

                <label>@Message</label>
            </div>
        </EditForm>
    </div>


</div>

@code{
    private void ValueChanged()
    {
        product.ChildCategoryId = 0;
        product.SmallCategoryId = 0;
    }
}